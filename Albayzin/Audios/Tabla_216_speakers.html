<!DOCTYPE html>
<html>
<head>
    <title>Albayzin</title>
    <style>
        h2 {
            border-bottom: 2px solid #ffcc80; /* Línea de subrayado en naranja claro */
            display: inline-block; /* Para que el ancho de la línea se ajuste al texto */
            padding-bottom: 5px; /* Espacio entre el texto y la línea de subrayado */
        }
         table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }

        audio {
            width: 100%;
        }

     .button_circ {
            background-color: #ccc; /* Color de fondo gris */
            color: black;
            border: none; /* Quitamos el borde */
            width: 20px; /* Ancho del botón */
            height: 20px; /* Altura del botón */
            border-radius: 50%; /* Hacemos que sea un círculo */
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
        }

    .button_circ.active {
            background-color: #ffa726;
            font-size: 8px;
            transform: scale(1.1);
        }
    .box {
      border: 1px solid black;
      padding: 5px;
      text-align: center;
      width: 150px;
    }
    
    .table-box {
      display: flex;
      flex-wrap: wrap;
    }
    .audio-small {
      width: 140px;
    }
    .audio-big{
      width: 300px;
    }
    .boton-rectangular {
      display: inline-block;
      padding: 10px 20px;
      border: 2px solid #333;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      text-align: center;
    }

    /* Estilos para el tick (inicialmente oculto) */
    .tick {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      font-size: 20px;
      color: green;
    }

    /* Estilos para el botón con el tick activado */
    .boton-rectangular:checked .tick {
      display: block;
    }
    .box.big {
      background-color: #f2f2f2; 
    }
    </style>
</head>
<body>
    <!-- Título h2 subrayado -->
    <h2>Albayzin 216 Speakers</h2>
<table id ='tableAlbayzin216'>
  <tr>
    <td colspan="9" class="box big"><strong>Elección de las 216 personas Albayzin</strong></td>
  </tr>
  <tr>
    <td colspan="9"> <select id="selectSpeakers216Albayzin" onchange="loadAudiosAlbayzin216Speakers(this.value)">
	    </select>
    </td>
  </tr>
  <tr>
    <td rowspan="2" colspan="4" class="box big">Audio Original</td>
    <td colspan="5"  class="box big">Audios Sintetizados</td>
  </tr>
  <tr>
    <td  class="box big">001</td>
    <td  class="box big">002</td>
    <td  class="box big">003</td>
    <td  class="box big">004</td>
    <td  class="box big">005</td>
  </tr>
  <tr>
    <td colspan="4"><audio class="audio-button audio-big" controls id="audioPlayerOriginales"> Tu navegador no soporta el elemento de audio.</audio></td>
    <td><audio class="audio-button audio-small" controls id="audioPlayerSintetizados1"> Tu navegador no soporta el elemento de audio.</audio></td>
    <td><audio class="audio-button audio-small" controls id="audioPlayerSintetizados2"> Tu navegador no soporta el elemento de audio.</audio></td>
    <td><audio class="audio-button audio-small" controls id="audioPlayerSintetizados3"> Tu navegador no soporta el elemento de audio.</audio></td>
    <td><audio class="audio-button audio-small" controls id="audioPlayerSintetizados4"> Tu navegador no soporta el elemento de audio.</audio></td>
    <td><audio class="audio-button audio-small" controls id="audioPlayerSintetizados5"> Tu navegador no soporta el elemento de audio.</audio></td>
  </tr>
  <tr>
    <td class="box big"  rowspan="2" colspan="3"><strong>PREGUNTAS</strong></td>
    <td colspan="6" class="box big"><strong>RESULTADOS</strong></td>
  </tr>
  <tr>
    <td>0</td>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
    <td>5</td>
  </tr>
    <!-- La función enviar respuesta es igual en los dos -->
  <tr>
    <td class="similitud" colspan="3">¿La voz es similar en ambos audios? Similitud</td>
    <td> <button class="button_circ pregunta1" onclick="enviarRespuestaAlbayzin('pregunta1', 0)"></button> </td>
    <td> <button class="button_circ pregunta1" onclick="enviarRespuestaAlbayzin('pregunta1', 1)"></button> </td>
    <td> <button class="button_circ pregunta1" onclick="enviarRespuestaAlbayzin('pregunta1', 2)"></button> </td>
    <td> <button class="button_circ pregunta1" onclick="enviarRespuestaAlbayzin('pregunta1', 3)"></button> </td>
    <td> <button class="button_circ pregunta1" onclick="enviarRespuestaAlbayzin('pregunta1', 4)"></button> </td>
    <td> <button class="button_circ pregunta1" onclick="enviarRespuestaAlbayzin('pregunta1', 5)"></button> </td>
  </tr>
  <tr>
    <td class="calidad" colspan="3">¿Que tal se entiende lo que dice, es de buena calidad el audio? Inteligibilidad y Calidad</td>
    <td> <button class="button_circ pregunta2" onclick="enviarRespuestaAlbayzin('pregunta2', 0)"></button> </td>
    <td> <button class="button_circ pregunta2" onclick="enviarRespuestaAlbayzin('pregunta2', 1)"></button> </td>
    <td> <button class="button_circ pregunta2" onclick="enviarRespuestaAlbayzin('pregunta2', 2)"></button> </td>
    <td> <button class="button_circ pregunta2" onclick="enviarRespuestaAlbayzin('pregunta2', 3)"></button> </td>
    <td> <button class="button_circ pregunta2" onclick="enviarRespuestaAlbayzin('pregunta2', 4)"></button> </td>
    <td> <button class="button_circ pregunta2" onclick="enviarRespuestaAlbayzin('pregunta2', 5)"></button> </td>
  </tr>
 <tr>
  <td colspan="9" class="box big">Anotaciones</td>
 </tr>
 <tr>
  <td colspan="9">
    <textarea id="anotaciones" rows="4" cols="100" placeholder="Escribe tus anotaciones aquí (opcional)"></textarea>
  </td>
</tr>
</table>
<button onclick="guardarRespuestasAlbayzin216()">Enviar Respuestas</button>
<script> 
    function enviarRespuestaAlbayzin(pregunta, respuesta) {
          // Lógica para guardar las respuestas en variables o en algún objeto, según necesites
          console.log("Pregunta:", pregunta, "Respuesta:", respuesta);
        
          // Resaltar el botón pulsado en la fila de respuesta correspondiente
          if (pregunta === 'pregunta1') {
            var buttons = document.querySelectorAll(".button_circ.pregunta1");
            buttons.forEach(button => button.classList.remove("active"));
            buttons[respuesta].classList.add("active");
          } else if (pregunta === 'pregunta2') {
            var buttons = document.querySelectorAll(".button_circ.pregunta2");
            buttons.forEach(button => button.classList.remove("active"));
            buttons[respuesta].classList.add("active");
          }
    }
    function loadAudiosAlbayzin216Speakers(value) {
	var audioPlayerOriginales = document.getElementById("audioPlayerOriginales");
	var audioPlayerSintetizados1 = document.getElementById("audioPlayerSintetizados1");
	var audioPlayerSintetizados2 = document.getElementById("audioPlayerSintetizados2");
        var audioPlayerSintetizados3 = document.getElementById("audioPlayerSintetizados3");
        var audioPlayerSintetizados4 = document.getElementById("audioPlayerSintetizados4");
        var audioPlayerSintetizados5 = document.getElementById("audioPlayerSintetizados5");
	// Si no se ha seleccionado ninguna opción, ocultar ambos audios
	if (!value) {
		audioPlayerOriginales.pause();
	        audioPlayerOriginales.src = "";
	        audioPlayerSintetizados1.pause();
	        audioPlayerSintetizados1.src = "";
            	audioPlayerSintetizados2.pause();
	        audioPlayerSintetizados2.src = "";
            	audioPlayerSintetizados3.pause();
	        audioPlayerSintetizados3.src = "";
            	audioPlayerSintetizados4.pause();
	        audioPlayerSintetizados4.src = "";
            	audioPlayerSintetizados5.pause();
	        audioPlayerSintetizados5.src = "";
	        return;
      	     }

      // Construir las URLs de los audios Originales y Sintetizados
      var audioSrcOriginales = "https://santirf01.github.io/TFG_TTS_page.io/Albayzin/Audios/Originales/216Speaker/" + value + "_orginial.wav";
      var audioSrcSintetizados1 = "https://santirf01.github.io/TFG_TTS_page.io/Albayzin/Audios/Sintetizados/216speakers/" +value+ "/" + value + "_fa000.wav";
      var audioSrcSintetizados2 = "https://santirf01.github.io/TFG_TTS_page.io/Albayzin/Audios/Sintetizados/216speakers/" +value+ "/" + value + "_fa001.wav";
      var audioSrcSintetizados3 = "https://santirf01.github.io/TFG_TTS_page.io/Albayzin/Audios/Sintetizados/216speakers/" +value+ "/" + value + "_fa002.wav";
      var audioSrcSintetizados4 = "https://santirf01.github.io/TFG_TTS_page.io/Albayzin/Audios/Sintetizados/216speakers/" +value+ "/" + value + "_fa003.wav";
      var audioSrcSintetizados5 = "https://santirf01.github.io/TFG_TTS_page.io/Albayzin/Audios/Sintetizados/216speakers/" +value+ "/" + value + "_fa004.wav";

      // Cargar y reproducir el audio Originales
      audioPlayerOriginales.src = audioSrcOriginales;
      audioPlayerOriginales.load();


      // Cargar y reproducir el audio Sintetizados
      audioPlayerSintetizados1.src = audioSrcSintetizados1;
      audioPlayerSintetizados1.load();
      audioPlayerSintetizados2.src = audioSrcSintetizados2;
      audioPlayerSintetizados2.load();
      audioPlayerSintetizados3.src = audioSrcSintetizados3;
      audioPlayerSintetizados3.load();
      audioPlayerSintetizados4.src = audioSrcSintetizados4;
      audioPlayerSintetizados4.load();
      audioPlayerSintetizados5.src = audioSrcSintetizados5;
      audioPlayerSintetizados5.load();
	}
     function cargar216Speakers() {
      // Cargar el JSON desde el archivo "data.json"
      fetch('https://santirf01.github.io/TFG_TTS_page.io/Albayzin/Audios/Speakers_Albayzin.json')
        .then(response => response.json())
        .then(data => {
          // Obtén el elemento select por su id
          var select = document.getElementById("selectSpeakers216Albayzin");

          // Recorre el JSON y crea las opciones del select
          data.forEach(function(speaker) {
          var option = document.createElement("option");
            option.value = speaker.value;
            option.text = speaker.text;
            select.appendChild(option);
	});
        })
        .catch(error => {
          console.error("Error al cargar el JSON:", error);
        });
    }

	
    function guardarRespuestasAlbayzin216() {
	    var respuesta = {};
	
	    // Obtener el valor seleccionado del select
	    var select = document.getElementById("selectSpeakers216Albayzin");
	    var speakerSeleccionado = select.value;
	    console.log(speakerSeleccionado)
	    // Verificar si se ha seleccionado una opción en el select
	    if (!speakerSeleccionado) {
		alert("Debes seleccionar un speaker antes de enviar las respuestas.");
		return;
	    } else {
		respuesta.speakerSeleccionado = speakerSeleccionado;
	    }
	
	    // Recorrer las filas de la tabla y obtener los valores de los botones activos
	    var table = document.getElementById("tableAlbayzin216");
	    var rows = table.getElementsByTagName("tr");
	
	    for (var i = 0; i < rows.length; i++) {
		var cells = rows[i].getElementsByTagName("td");
	
		if (cells.length >= 7) { // Solo procesar filas con botones de respuesta
		    var pregunta = cells[0].innerText;
		    var calidad = -1; // Valor inicial en caso de que no haya ningún botón activo
	
		    // Encontrar el botón activo
		    for (var j = 1; j < cells.length; j++) {
			var botones = cells[j].getElementsByTagName("button");
			for (var k = 0; k < botones.length; k++) { 
			    if (botones[k].classList.contains("active")) {
				calidad = j - 1;
				break;
			    }
			}
	
			if (calidad !== -1) {
			    break;
			}
		    }
	
		    if (pregunta.includes("Similitud")) {
			respuesta.Similitud = calidad;
		    } else if (pregunta.includes("Calidad")) {
			respuesta.Calidad = calidad;
		    }
		}
	    }
	
	    // Obtener las anotaciones
	    var anotaciones = document.getElementById("anotaciones").value;
	    respuesta.anotaciones = anotaciones;
	
	    // Aquí puedes hacer lo que necesites con la lista de respuestas
	    console.log("Respuestas:", respuesta);
	
	    alert("Respuestas enviadas correctamente.");
  	}
   document.addEventListener('DOMContentLoaded', function() {
        var selectElement = document.getElementById("selectSpeakers216Albayzin");
        if (selectElement) {
            cargar216Speakers();
        } else {
            console.error("El elemento con el id 'selectSpeakers216Albayzin' no se encontró en el DOM.");
        }
    });
</script>
</body>
</html>
